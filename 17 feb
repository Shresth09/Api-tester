var cscore = apiResponse.NA.cscore;
var messages = apiResponse.NA.message;
var rulesBroken = apiResponse.NA.subkind;

// Add bullet points to messages
var bulletedMessages = messages.map(function(msg) {
    return `&#8226; ${msg}`; // Use HTML bullet point
}).join("<br>");

// Create the table in a formatted string
var formattedData = `
<table style='width: 100%; border-collapse: collapse;'>
    <tr>
        <td style='border: 1px solid #ddd; padding: 8px; font-size: 1.2em; font: Citi-Sans-Text-Regular;'><strong>Description Score:</strong></td>
        <td style='border: 1px solid #ddd; padding: 8px; font-size: 1.2em; font: Citi-Sans-Text-Regular;'>${cscore}</td>
    </tr>
    <tr>
        <td style='border: 1px solid #ddd; padding: 8px; font-size: 1.2em; font: Citi-Sans-Text-Regular;'><strong>Rules Broken:</strong></td>
        <td style='border: 1px solid #ddd; padding: 8px; font-size: 1.2em; font: Citi-Sans-Text-Regular;'>${rulesBroken}</td>
    </tr>
    <tr>
        <td style='border: 1px solid #ddd; padding: 8px; font-size: 1.2em; font: Citi-Sans-Text-Regular;'><strong>Action Required:</strong></td>
        <td style='border: 1px solid #ddd; padding: 8px; font-size: 1.2em; font: Citi-Sans-Text-Regular;'>${bulletedMessages}</td>
    </tr>
</table>
`;

// Insert the formatted data into the desired element
AJS.$("#api-response").html(formattedData);
AJS.dialog2("#api-modal").show();