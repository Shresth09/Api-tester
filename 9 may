AJS.$("#download-ter-report-button").on("click", function() {
    var suggestedTERSummary = AJS.$("#suggested-story-textarea").val(); // Get the actual textarea value
    var globalTestExitReportContent = /* ... logic to get content for $(globalTestExitReport) ... */;
    var globalMitigationPlanAttachmentContent = /* ... logic to get content for $(globalMitigationPlanAttachment) ... */;
    var jiralssueReffUrl = AJS.params.baseURL + "/browse/" + globalIssuekey;

    var printHTML = `
        <html>
        <head><title>Citi-Plugin Test Exit Report for ${globalIssuekey}</title></head>
        <body>
            <p><a href="${jiraIssueReffUrl}">View Issue</a></p>
            <div>
                <h3>Request Attachments</h3>
                <div>
                    ${globalTestExitReportContent} <br>
                    ${globalMitigationPlanAttachmentContent}
                </div>
            </div>
            <br>
            <div>
                <h3>Generated Summary</h3>
                <div>
                    ${suggestedTERSummary}
                </div>
            </div>
        </body>
        </html>
    `;

    var printwindow = window.open('', '_blank');
    printwindow.document.open();
    printwindow.document.write(printHTML);
    printwindow.document.close();
    printwindow.focus();
    printWindow.print();
    printwindow.close();
});
