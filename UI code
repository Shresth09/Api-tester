<div style="margin-top: 10px;">
    <span style="color: #B23802; font-weight: bold; cursor: pointer;" onclick="toggleDescription('current-story-description')">
        <span id="current-story-toggle">+</span> Current Story Description -
    </span>
</div>

<div id="current-story-description" style="margin-top: 5px; display: none;">
    ${globalDescription}
</div>







var rulesTableDiv = `
    <div style="margin-top: 20px;">
        <b>Rules Broken - 8 out of 14</b>
        <span style="font-size: 0.8em; color: #888;">(Generated by RecSure)</span>
    </div>

    <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
        <thead>
            <tr>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Rule</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Status</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Link</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Well-formed</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Well-formed</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Atomic</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Atomic</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Minimal</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Failed</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Minimal</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Conceptually sound</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Failed</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Conceptually sound</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Problem-oriented</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Problem-oriented</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Unambiguous</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Unambiguous</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Conflict-free</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Conflict-free</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Full sentence</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Full sentence</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Estimatable</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Estimatable</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Unique</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Failed</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Unique</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Uniform</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Uniform</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Complete</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">Complete</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">ADA</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">ADA</a></td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">PII Data</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Pass</td>
                <td style="border: 1px solid #ddd; padding: 8px;"><a href="#">PII Data</a></td>
            </tr>
        </tbody>
    </table>
`;


@(₹(₹)#?##?#




var suggestedStoryDescriptionDiv = `
    <div style="margin-top: 20px;">
        <span style="color: #B23802; font-weight: bold;">Suggested Story Description -</span>
    </div>

    <div style="margin-top: 5px;">
        <textarea id="suggested-story-textarea" class="textarea long-field" style="width: 100%; height: 100px;">
            As a developer, I want to create an Angular application with a user interface and deploy it to LSE so that users can access the application's features.
        </textarea>
    </div>

    <div style="margin-top: 10px; text-align: left;">
        <button class="aui-button" id="accept-suggested-story">
            <span class="aui-icon aui-icon-small aui-iconfont-approve"></span> Accept
        </button>
    </div>
`;


-=-) - 




var currentStoryDescriptionDiv = `
    <div style="margin-top: 10px;">
        <span style="color: #B23802; font-weight: bold;">Current Story Description -</span>
    </div>
    <div style="margin-top: 5px;">
        The user story has some issues related to being well-formed, atomic, minimal, problem-oriented, unambiguous, a full sentence, estimable, and ADA compliant.<br><br>
        It needs to be rewritten with a clearer focus on the user's perspective, broken down into smaller stories, and avoid implementation details.
    </div>
`;



var formattedData = `
    <u><b>Overall Score: ${cscore}%</b></u><br>

    <div style='font-color:#B23802;'>
        Current Story Description -
    </div>

    ${globalDescription}<br>

    <div>
        <h3>Suggested Story Description</h3>
        <textarea id="suggested-story-description" class="textarea">${apiResponse.NA.suggestedStory}</textarea>
    </div>

    <table id="rules-table" class="aui">
        <thead>
            <tr>
                <th>Rule</th>
                <th>Status</th>
                <th>Link</th>
            </tr>
        </thead>
        <tbody>
    `;

apiResponse.NA.rules.forEach(function(rule) {
    formattedData += `
            <tr>
                <td>${rule.name}</td>
                <td>${rule.status === "passed" ? "&#9989;" : "&#9940;"} ${rule.status}</td>
                <td><a href="${rule.link}">Link</a></td>
            </tr>
    `;
});

formattedData += `
        </tbody>
    </table>

    <p><a href="link" target="_blank">Link to ROM</a></p>

    <footer class="aui-dialog2-footer">
        <div class="aui-dialog2-footer-actions">
            <button id="yes-button" class="aui-button aui-button-primary">Yes</button>
            <button id="no-button" class="aui-button">No</button>
        </div>
        <div class="aui-dialog2-footer-hint">
            3 Stars
        </div>
    </footer>
`;

AJS.$("#api-response").html(formattedData);

AJS.dialog2("#api-modal").show();
