<style>
    .custom-box {
        border: 1px solid #ccc;
        padding: 10px;
        margin: 10px 0;
        border-radius: 5px;
        width: fit-content;
        box-sizing: content-box;
        position: relative;
    }

    .rqm-label {
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: white;
        padding: 0 5px;
        font-size: 0.9em;
    }

    .progress-wrapper {
        height: 100px; /* Adjust height as needed */
        display: flex;
        align-items: center;
        justify-content: center;
    }

    path {
        stroke-linecap: round;
        stroke-width: 6;
    }

    .grey {
        stroke: #e5e5e5;
        stroke-width: 3px;
    }

    .green {
        stroke: url(#arcGradient);
        stroke-width: 9px;
        stroke-dasharray: 248;
        stroke-dashoffset: 248; /* Start empty */
    }
</style>

<div class="custom-box">
    <div class="rqm-label">Gamify Score</div>
    <div class="progress-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
             viewBox="0 0 120 100" width="120" height="100">
            <defs>
                <linearGradient id="arcGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stop-color="red"/>
                    <stop offset="20%" stop-color="darkorange"/>
                    <stop offset="50%" stop-color="khaki"/>
                    <stop offset="80%" stop-color="yellowgreen"/>
                    <stop offset="100%" stop-color="limegreen"/>
                </linearGradient>
            </defs>
            <path class="grey" d="M55,90 A55,55 0 1,1 140,90" style="fill:none;"/>
            <path class="green" d="M55,90 A55,55 0 1,1 140,90" style="fill:none;"/>
        </svg>
    </div>
    <div><a id="show-popup" class="aui-button">Details</a></div>
</div>

<script>
    #set ($score = 7) // Replace with your actual score variable
    const userScore = $score;

    document.addEventListener("DOMContentLoaded", function() {
        const arcPath = document.querySelector(".green");

        if (arcPath) {
            const totalLength = 248;
            const percentage = userScore / 10;
            const offset = totalLength - (totalLength * percentage);

            arcPath.style.strokeDashoffset = offset;
        }
    });
</script>
