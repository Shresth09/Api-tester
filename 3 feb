public class CustomFieldServlet {

    private static final Logger log = Logger.getLogger(CustomFieldServlet.class);

    private void createCustomField(HttpServletResponse resp) {

        CustomFieldManager customFieldManager = ComponentAccessor.getCustomFieldManager();
        FieldLayoutManager fieldLayoutManager = ComponentAccessor.getFieldLayoutManager();

        try {
            String fieldName = "Score";

            CustomField customField = customFieldManager.getCustomFieldObjectByName(fieldName);

            // Check if the custom field already exists
            if (customField == null) {
                // Create the custom field
                customField = customFieldManager.createCustomField(
                    fieldName,
                    "The score of the issue's description",
                    customFieldManager.getCustomFieldType("com.atlassian.jira.plugin.system.customfieldtypes:float"),
                    customFieldManager.getCustomFieldSearcher("com.atlassian.jira.plugin.system.customfieldtypes:exactnumber"),
                    Collections.emptyList(),
                    null
                );

                // Associate the custom field with the default screen
                Collection<FieldScreen> screens = ComponentAccessor.getFieldScreenManager().getFieldScreens();
                final CustomField finalCustomField = customField;

                for (FieldScreen screen : screens) {
                    List<FieldScreenTab> tabs = screen.getTabs();
                    for (FieldScreenTab tab : tabs) {
                        if (tab.getFieldScreenLayoutItems().stream().anyMatch(item -> item.getFieldId().equals(finalCustomField.getId()))) {
                            tab.addFieldScreenLayoutItem(customField.getId());
                        }
                    }
                }
            }

            // Hide the custom field in all field configurations to make it read-only
            Collection<EditableFieldLayout> fieldLayouts = fieldLayoutManager.getEditableFieldLayouts();
            int i = 0;
            for (EditableFieldLayout editableFieldLayout : fieldLayouts) {
                FieldLayoutItem fieldLayoutItem = editableFieldLayout.getFieldLayoutItem(customField);
                if (fieldLayoutItem != null) {
                    editableFieldLayout.hide(fieldLayoutItem);
                    fieldLayoutManager.storeEditableFieldLayout(editableFieldLayout);
                }
            }

        } catch (Exception e) {
            log.error("Error creating custom field", e);
        }
    }
}